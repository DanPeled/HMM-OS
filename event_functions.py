import time as t
from datetime import datetime as dt
import os

holidays = {'12-31': 'New year'}


def passed_event():
    pass


def upcoming_event(type_, event, year, month, day=None):
    if type_ == 'm':
        if dt.now().date().strftime("%Y.%m") == f"{year}.{month}":
            print(f"{event} is this month!")
    elif type_ == 'd':
        if dt.now().date().strftime("%Y.%m.%d") == f"{year}.{month}.{day}":
            print(f"{event} is today!")


def delete_event(event, should_print):
    if should_print:
        text = open(f'events/event list.txt').read().replace(f'{event},', '')
        answer = input(f'Are you sure you want to delete {event}? \n[Y] Yes\n[N] No\n[?] : ')
        if answer == 'y':
            os.remove(f'events/{event}.txt')
            with open('events/event list.txt', 'r+') as f:
                f.truncate(0)
                print(f'was deleted')
                f.write(text)
        elif answer == 'n':
            print(f'Cancelled deleting {event}')
    elif not should_print:
        text = open(f'events/event list.txt').read().replace(f'{event},', '')
        os.remove(f'events/{event}.txt')
        with open('events/event list.txt', 'r+') as f:
            f.truncate(0)
            f.write(text)


def check_upcoming(_type):
    with open('events/event list.txt') as f:
        read = f.read().split(',')
        read.remove(read[-1])
        for event in read:
            with open(f'events/{event}.txt') as file:
                current_event = file.readlines()
                event_date = current_event[2].replace('starts on - ', '').replace(" ", "").split('.')
                if _type == 'm':
                    upcoming_event(event=event, year=event_date[0], month=event_date[1], type_=_type)
                if _type == 'd':
                    upcoming_event(event=event, year=event_date[0], month=event_date[1], day=event_date[2], type_=_type)


def check_for_events():
    if dt.now().strftime("%m-%d") in holidays:
        event = holidays[dt.now().strftime("%m-%d")]
        if event != holidays['12-31']:
            print(f'it is {event}')
        else:
            if dt.now().time().strftime("%H:%M:%S") == dt.now().time().strftime("23:59:55"):
                print("""
███████╗
██╔════╝
██████╗░
╚════██╗
██████╔╝
╚═════╝░""")
                t.sleep(1)
                print("""
░░██╗██╗
░██╔╝██║
██╔╝░██║
███████║
╚════██║
░░░░░╚═╝""")
                t.sleep(1)
                print("""
██████╗░
╚════██╗
░█████╔╝
░╚═══██╗
██████╔╝
╚═════╝░""")
                t.sleep(1)
                print("""
██████╗░
╚════██╗
░░███╔═╝
██╔══╝░░
███████╗
╚══════╝""")
                t.sleep(1)
                print("""
░░███╗░░
░████║░░
██╔██║░░
╚═╝██║░░
███████╗
╚══════╝""")
                t.sleep(1)
                print("""
██╗░░██╗░█████╗░██████╗░██████╗░██╗░░░██╗  ███╗░░██╗███████╗░██╗░░░░░░░██╗  ██╗░░░██╗███████╗░█████╗░██████╗░██╗
██║░░██║██╔══██╗██╔══██╗██╔══██╗╚██╗░██╔╝  ████╗░██║██╔════╝░██║░░██╗░░██║  ╚██╗░██╔╝██╔════╝██╔══██╗██╔══██╗██║
███████║███████║██████╔╝██████╔╝░╚████╔╝░  ██╔██╗██║█████╗░░░╚██╗████╗██╔╝  ░╚████╔╝░█████╗░░███████║██████╔╝██║
██╔══██║██╔══██║██╔═══╝░██╔═══╝░░░╚██╔╝░░  ██║╚████║██╔══╝░░░░████╔═████║░  ░░╚██╔╝░░██╔══╝░░██╔══██║██╔══██╗╚═╝
██║░░██║██║░░██║██║░░░░░██║░░░░░░░░██║░░░  ██║░╚███║███████╗░░╚██╔╝░╚██╔╝░  ░░░██║░░░███████╗██║░░██║██║░░██║██╗
╚═╝░░╚═╝╚═╝░░╚═╝╚═╝░░░░░╚═╝░░░░░░░░╚═╝░░░  ╚═╝░░╚══╝╚══════╝░░░╚═╝░░░╚═╝░░  ░░░╚═╝░░░╚══════╝╚═╝░░╚═╝╚═╝░░╚═╝╚═╝""")
            if dt.now().time().strftime("%H:%M:%S") == dt.now().time().strftime("23:59:56"):
                print("""
        ░░██╗██╗
        ░██╔╝██║
        ██╔╝░██║
        ███████║
        ╚════██║
        ░░░░░╚═╝""")
                t.sleep(1)
                print("""
        ██████╗░
        ╚════██╗
        ░█████╔╝
        ░╚═══██╗
        ██████╔╝
        ╚═════╝░""")
                t.sleep(1)
                print("""
        ██████╗░
        ╚════██╗
        ░░███╔═╝
        ██╔══╝░░
        ███████╗
        ╚══════╝""")
                t.sleep(1)
                print("""
        ░░███╗░░
        ░████║░░
        ██╔██║░░
        ╚═╝██║░░
        ███████╗
        ╚══════╝""")
                t.sleep(1)
                print("""
        ██╗░░██╗░█████╗░██████╗░██████╗░██╗░░░██╗  ███╗░░██╗███████╗░██╗░░░░░░░██╗  ██╗░░░██╗███████╗░█████╗░██████╗░██╗
        ██║░░██║██╔══██╗██╔══██╗██╔══██╗╚██╗░██╔╝  ████╗░██║██╔════╝░██║░░██╗░░██║  ╚██╗░██╔╝██╔════╝██╔══██╗██╔══██╗██║
        ███████║███████║██████╔╝██████╔╝░╚████╔╝░  ██╔██╗██║█████╗░░░╚██╗████╗██╔╝  ░╚████╔╝░█████╗░░███████║██████╔╝██║
        ██╔══██║██╔══██║██╔═══╝░██╔═══╝░░░╚██╔╝░░  ██║╚████║██╔══╝░░░░████╔═████║░  ░░╚██╔╝░░██╔══╝░░██╔══██║██╔══██╗╚═╝
        ██║░░██║██║░░██║██║░░░░░██║░░░░░░░░██║░░░  ██║░╚███║███████╗░░╚██╔╝░╚██╔╝░  ░░░██║░░░███████╗██║░░██║██║░░██║██╗
        ╚═╝░░╚═╝╚═╝░░╚═╝╚═╝░░░░░╚═╝░░░░░░░░╚═╝░░░  ╚═╝░░╚══╝╚══════╝░░░╚═╝░░░╚═╝░░  ░░░╚═╝░░░╚══════╝╚═╝░░╚═╝╚═╝░░╚═╝╚═╝""")
            if dt.now().time().strftime("%H:%M:%S") == dt.now().time().strftime("23:59:57"):
                print("""
            ██████╗░
            ╚════██╗
            ░█████╔╝
            ░╚═══██╗
            ██████╔╝
            ╚═════╝░""")
                t.sleep(1)
                print("""
            ██████╗░
            ╚════██╗
            ░░███╔═╝
            ██╔══╝░░
            ███████╗
            ╚══════╝""")
                t.sleep(1)
                print("""
            ░░███╗░░
            ░████║░░
            ██╔██║░░
            ╚═╝██║░░
            ███████╗
            ╚══════╝""")
                t.sleep(1)
                print("""
            ██╗░░██╗░█████╗░██████╗░██████╗░██╗░░░██╗  ███╗░░██╗███████╗░██╗░░░░░░░██╗  ██╗░░░██╗███████╗░█████╗░██████╗░██╗
            ██║░░██║██╔══██╗██╔══██╗██╔══██╗╚██╗░██╔╝  ████╗░██║██╔════╝░██║░░██╗░░██║  ╚██╗░██╔╝██╔════╝██╔══██╗██╔══██╗██║
            ███████║███████║██████╔╝██████╔╝░╚████╔╝░  ██╔██╗██║█████╗░░░╚██╗████╗██╔╝  ░╚████╔╝░█████╗░░███████║██████╔╝██║
            ██╔══██║██╔══██║██╔═══╝░██╔═══╝░░░╚██╔╝░░  ██║╚████║██╔══╝░░░░████╔═████║░  ░░╚██╔╝░░██╔══╝░░██╔══██║██╔══██╗╚═╝
            ██║░░██║██║░░██║██║░░░░░██║░░░░░░░░██║░░░  ██║░╚███║███████╗░░╚██╔╝░╚██╔╝░  ░░░██║░░░███████╗██║░░██║██║░░██║██╗
            ╚═╝░░╚═╝╚═╝░░╚═╝╚═╝░░░░░╚═╝░░░░░░░░╚═╝░░░  ╚═╝░░╚══╝╚══════╝░░░╚═╝░░░╚═╝░░  ░░░╚═╝░░░╚══════╝╚═╝░░╚═╝╚═╝░░╚═╝╚═╝""")
            if dt.now().time().strftime("%H:%M:%S") == dt.now().time().strftime("23:59:58"):
                print("""
            ██████╗░
            ╚════██╗
            ░░███╔═╝
            ██╔══╝░░
            ███████╗
            ╚══════╝""")
                t.sleep(1)
                print("""
            ░░███╗░░
            ░████║░░
            ██╔██║░░
            ╚═╝██║░░
            ███████╗
            ╚══════╝""")
                t.sleep(1)
                print("""
            ██╗░░██╗░█████╗░██████╗░██████╗░██╗░░░██╗  ███╗░░██╗███████╗░██╗░░░░░░░██╗  ██╗░░░██╗███████╗░█████╗░██████╗░██╗
            ██║░░██║██╔══██╗██╔══██╗██╔══██╗╚██╗░██╔╝  ████╗░██║██╔════╝░██║░░██╗░░██║  ╚██╗░██╔╝██╔════╝██╔══██╗██╔══██╗██║
            ███████║███████║██████╔╝██████╔╝░╚████╔╝░  ██╔██╗██║█████╗░░░╚██╗████╗██╔╝  ░╚████╔╝░█████╗░░███████║██████╔╝██║
            ██╔══██║██╔══██║██╔═══╝░██╔═══╝░░░╚██╔╝░░  ██║╚████║██╔══╝░░░░████╔═████║░  ░░╚██╔╝░░██╔══╝░░██╔══██║██╔══██╗╚═╝
            ██║░░██║██║░░██║██║░░░░░██║░░░░░░░░██║░░░  ██║░╚███║███████╗░░╚██╔╝░╚██╔╝░  ░░░██║░░░███████╗██║░░██║██║░░██║██╗
            ╚═╝░░╚═╝╚═╝░░╚═╝╚═╝░░░░░╚═╝░░░░░░░░╚═╝░░░  ╚═╝░░╚══╝╚══════╝░░░╚═╝░░░╚═╝░░  ░░░╚═╝░░░╚══════╝╚═╝░░╚═╝╚═╝░░╚═╝╚═╝""")
            if dt.now().time().strftime("%H:%M:%S") == dt.now().time().strftime("23:59:59"):
                print("""
            ░░███╗░░
            ░████║░░
            ██╔██║░░
            ╚═╝██║░░
            ███████╗
            ╚══════╝""")
                t.sleep(1)
                print("""
            ██╗░░██╗░█████╗░██████╗░██████╗░██╗░░░██╗  ███╗░░██╗███████╗░██╗░░░░░░░██╗  ██╗░░░██╗███████╗░█████╗░██████╗░██╗
            ██║░░██║██╔══██╗██╔══██╗██╔══██╗╚██╗░██╔╝  ████╗░██║██╔════╝░██║░░██╗░░██║  ╚██╗░██╔╝██╔════╝██╔══██╗██╔══██╗██║
            ███████║███████║██████╔╝██████╔╝░╚████╔╝░  ██╔██╗██║█████╗░░░╚██╗████╗██╔╝  ░╚████╔╝░█████╗░░███████║██████╔╝██║
            ██╔══██║██╔══██║██╔═══╝░██╔═══╝░░░╚██╔╝░░  ██║╚████║██╔══╝░░░░████╔═████║░  ░░╚██╔╝░░██╔══╝░░██╔══██║██╔══██╗╚═╝
            ██║░░██║██║░░██║██║░░░░░██║░░░░░░░░██║░░░  ██║░╚███║███████╗░░╚██╔╝░╚██╔╝░  ░░░██║░░░███████╗██║░░██║██║░░██║██╗
            ╚═╝░░╚═╝╚═╝░░╚═╝╚═╝░░░░░╚═╝░░░░░░░░╚═╝░░░  ╚═╝░░╚══╝╚══════╝░░░╚═╝░░░╚═╝░░  ░░░╚═╝░░░╚══════╝╚═╝░░╚═╝╚═╝░░╚═╝╚═╝""")
    else:
        pass
